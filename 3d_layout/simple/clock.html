<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta http-equiv="Access-Control-Allow-Origin" content="*">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<base href="../" />
		<title>机械时钟</title>

		<style>
			.world {
			outline: 0px;
			}

	body {
		width: 100vw;
		height: 100vh;
		background-image: url(./img/xingkong1.jpeg);
		background-size: 100% 100%;
		overflow: hidden;
	}

	.world,
	body {

		width: 100vw;
		height: 100vh;

		position: absolute;
		left: 0px;
		top: 0px;

		perspective: 100vw;
		transform-style: preserve-3d;
		
		/* background-color: rgba(200,200,50,1); */
		
	}

	.container-a,
	.container-b {
		width: 2%;
		height: 2%;

		position: absolute;
		top: 49%;
		left: 49%;

		transform-style: preserve-3d;
	}


	.qiang1 {
		position: absolute;
		background-size: 100% 100%;
		
		transform-origin: 3cm 2cm;
		width: 100%;
		height: 100%;
		right: 0%;
		top: 10%;

		font-size: 3em;
		font-family: 隶书;
		color: blue;

	}

	p {
		margin: 1rem;
		/* writing-mode: vertical-lr; */
		font-size: 2rem;
		font-family: 隶书;
		color: #666;
		text-shadow: 5px 5px 5px black;
		transform: translateZ(3cm);
		position: absolute;
		text-align: left;
		width: 100%;
		left: -30vw;
	}


	.socket,
	.button1,
	.button2,
	.button3 {
		width: 10cm;
		height: 10cm;
		position: absolute;
		left: calc(50% - 5cm);
		top: calc(50% - 5cm);
		background-size: 100% 100%;

	}



	/* 钟表盘 */
	.socket {
		/* background-image: url(./img/rotate_button/socket3.PNG); */
		/* background-image: url(./img/rotate_button/socket2.PNG); */
		background-image: url(./img/rotate_button/clock_socket.PNG);
	}

	/* 秒针 */
	.button1 {
		/* background-image: url(./img/rotate_button/button3.PNG); */
		/* background-image: url(./img/rotate_button/button2_1.PNG); */
		background-image: url(./img/rotate_button/clock_point1.PNG);
	}

	/* 分钟指针 */
	.button2 {
		/* background-image: url(./img/rotate_button/button3.PNG); */
		/* background-image: url(./img/rotate_button/button2_1.PNG); */
		background-image: url(./img/rotate_button/clock_point2.PNG);
	}

	/* 时针 */
	.button3 {
		/* background-image: url(./img/rotate_button/button3.PNG); */
		/* background-image: url(./img/rotate_button/button2_1.PNG); */
		background-image: url(./img/rotate_button/clock_point3.PNG);
	}
	
	.world>img{
		position: absolute;
		right: 2%;
		bottom:2%;
		width:10cm;
	}
</style>



		<script src="./component/web3D.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			var xishu = 10;
			$(function() {
				
				// 
				var startAngle_sec = 0; //秒
				var startAngle_min = 0; //分钟
				var startAngle_hours = 0; //小时

				var ms1 = 'perspective(5cm) translateZ(6mm)';
				var ms2 = 'perspective(5cm) translateZ(2mm)';
				var ms3 = 'perspective(5cm) translateZ(2mm)';
				$init3D(".button1,.button2,.button3", "perspective(20cm) translateZ(2mm)");
				
				// switchAxis(selectedObject_JQuery);
				
				// 每秒自动转6度
				window.setInterval(function() {
					startAngle_sec += 6;
					startAngle_sec %= 360;
					$(".button1").css({
						"transform": ms1 + " rotateZ(" + startAngle_sec + "deg)"
					});
				}, 1000 / xishu);

				window.setInterval(function() {
					startAngle_min += 6;
					startAngle_min %= 360;
					$(".button2").css({
						"transform": ms2 + "rotateZ(" + startAngle_min + "deg)"
					});
				}, 60000 / xishu);

				window.setInterval(function() {
					startAngle_hours += 6;
					startAngle_hours %= 360;
					$(".button3").css({
						"transform": ms3 + "rotateZ(" + startAngle_hours + "deg)"
					});
				}, 3600000 / xishu);

				// touch点击转60度
				$("*").on("touchstart", function(e) {
					startAngle_sec = (startAngle_sec + 60) % 360;
					$(".button").css({
						"transform": "rotateZ(" + startAngle_sec + "deg)"
					})
					return false;
				})


				// 创建多个时钟
				var nd = $(".container-b");
				for (var i = 0; i < 10; i++) {
						var tmp = 
						nd.clone()
						.addClass("clk_"+Math.random().toString().replace(".", "-"))
						.appendTo(".world");
						
						$init3D(tmp,
						"rotateY({0}deg) translateZ({1}cm) rotateY(-{0}deg)"
						.format(45,-(i+1)*20)
						);
				}

				$watch(".world,body", ".container-b:first", "z", "rotate", ".world>div");
			})
		</script>

	</head>
	<body>


		<div class="world">
			<img src="./img/flowers/h31.PNG" alt="">
			<div class="container-a">
				<div class="qiang qiang1">

					<p>
						{{xishu}}倍时钟
					</p>

				</div>

			</div>


			<div class="container-b">


				<div class="socket"></div>
				<div class="button1"></div>
				<div class="button2"></div>
				<div class="button3"></div>
			</div>


		</div>

	</body>
</html>
